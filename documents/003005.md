# webpack 之重要概念

## 一、webpack webpack-cli

* webpack 和 webpack-cli
* 不应该全局安装webpack，webpack应该跟项目绑定
* 去了解 npx vs npm
  + npm 永久安裝，npx 安裝後即移除
  + 更方便的運行本地套件
  + npx webpack -v
* 去了解 npm script

## 二、Concepts

* Entry
* Output
* Loaders
* Plugins
* Mode
* Browser Compatibility

## 三、Loader

处理图片，字体

* url-loader
* file-loader

处理样式

* css-loader
* style-loader
  + importLoaders: 2
  + modules: true (style-loader 支持 css modules 特性，解决样式冲突)
* sass-loader
* postcss-loader -> plugins: [autoprefixer]
* less-loader

## 四、Plugins

* HtmlWebpackPlugin, ejs模板语法
* CleanWebpackPlugin（非官方plugin）

ejs模板语法

``` html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <% if(htmlWebpackPlugin.options.fetchAuthByIFrame == 'yes') { %>
    <script>
        window.onload = function() {
            window.frames[0].postMessage(
                'AuthorizationOPM',
                '<%= htmlWebpackPlugin.options.authAddr %>',
            );
        };
        window.addEventListener(
            'message',
            function(e) {
                const data = e.data;
                if (data.AuthorizationOPM) {
                    localStorage.setItem('AuthorizationOPM', data.AuthorizationOPM);
                }
            },
            false,
        );
    </script>
    <% } %>
    <title><%= htmlWebpackPlugin.options.title %></title>
    <!-- 引入样式 -->
    <% for(var css of htmlWebpackPlugin.options.static.styles) { %>
    <link rel="stylesheet" href="<%=css%>" />
    <% } %>
    <!-- 引入js -->
    <% for(var js of htmlWebpackPlugin.options.static.scripts) { %>
    <script src="<%=js%>"></script>
    <% } %>
</head>

<body style="background-color: #eee">
    <% if(htmlWebpackPlugin.options.fetchAuthByIFrame == 'yes') { %>
    <div id="opm-auth" style="
        position: absolute;
        height: 500px;
        line-height: 500px;
        width: 600px;
        text-align: center;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        background-color: #f5f5f500;
        z-index: 100;
        color: #1990ff;
      ">
        <%= htmlWebpackPlugin.options.authMsg %>
    </div>
    <iframe src="<%= htmlWebpackPlugin.options.authAddr %>" style="width: 0; height: 0px; visibility: hidden"></iframe>
    <% } %>
    <div id="app"></div>
</body>

</html>
```

## 五、Entry 和 Output

## 六、SourceMap
